(()=>{var e={};e.id=14,e.ids=[14],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},11723:e=>{"use strict";e.exports=require("querystring")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},28047:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>c,serverHooks:()=>m,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>d});var s={};r.r(s),r.d(s,{GET:()=>p,POST:()=>p});var i=r(42706),a=r(28203),n=r(45994),o=r(50117),u=r(51825);let p=r.n(u)()(o.N),c=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/auth/[...nextauth]/route",pathname:"/api/auth/[...nextauth]",filename:"route",bundlePath:"app/api/auth/[...nextauth]/route"},resolvedPagePath:"D:\\01.ProjectsForPortfolio\\telegram_clone\\client\\app\\api\\auth\\[...nextauth]\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:d,serverHooks:m}=c;function x(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:d})}},96487:()=>{},78335:()=>{},50117:(e,t,r)=>{"use strict";r.d(t,{N:()=>c});var s=r(56037),i=r.n(s);let a=new s.Schema({email:{type:String,required:!0,unique:!0},isVerified:{type:Boolean,default:!1},firstName:{type:String},lastName:{type:String},bio:{type:String},avatar:{type:String},muted:{type:Boolean,default:!1},notificationSound:{type:String,default:"notification.mp3"},sendingSound:{type:String,default:"sending.mp3"},contacts:[{type:s.Schema.Types.ObjectId,ref:"User"}]}),n=s.models.User||(0,s.model)("User",a);var o=r(91642);let u=!1,p=async()=>{if(i().set("strictQuery",!0),!process.env.MONGODB_URI)return console.error("MONGO_URI is not defined");if(u){console.log("MongoDB is already connected");return}try{await i().connect(process.env.MONGODB_URI,{autoCreate:!0}),u=!0}catch(e){console.log("Couldn't connect to MongoDB",e)}},c={providers:[(0,o.A)({name:"Credentials",credentials:{email:{label:"Email",type:"email"}},authorize:async e=>(await p(),await n.findOne({email:e?.email}))})],callbacks:{async session({session:e}){await p();let t=await n.findOne({email:e.user?.email});if(!t){let t=await n.create({email:e.user?.email,isVerified:!0,avatar:e.user?.image});return e.currentUser=t,e}return e.currentUser=t,e}},session:{strategy:"jwt"},jwt:{secret:"f8HzQ97Km92Lx0Tfs2P3N8a"},secret:process.env.NEXTAUTH_SECRET,pages:{signIn:"/auth",signOut:"/auth"}}},42706:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[681,690],()=>r(28047));module.exports=s})();