(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[342],{86047:(e,s,t)=>{Promise.resolve().then(t.bind(t,97285))},97285:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>e7});var a=t(95155),r=t(38435);let l=()=>{let[e]=(0,r.A)("/audio/notification.mp3"),[s]=(0,r.A)("/audio/notification2.mp3"),[t]=(0,r.A)("/audio/sending.mp3"),[a]=(0,r.A)("/audio/sending2.mp3");return{playSound:r=>{switch(r){case"notification.mp3":e();break;case"notification2.mp3":s();break;case"sending.mp3":t();break;case"sending2.mp3":a()}}}};var n=t(39196),i=t(99827);let d=(0,i.v)()(e=>({currentContact:null,setCurrentContact:s=>e({currentContact:s}),editedMessage:null,setEditedMessage:s=>e({editedMessage:s})})),o=(0,i.v)()(e=>({isCreating:!1,setCreating:s=>e({isCreating:s}),isLoading:!1,setLoading:s=>e({isLoading:s}),loadMessages:!1,setLoadMessages:s=>e({loadMessages:s}),typing:{sender:null,message:""},setTyping:s=>e({typing:s})}));var c=t(20241),u=t(44244);let m=[{value:"notification.mp3",label:"Apple"},{value:"notification2.mp3",label:"Sammish"},{value:"sending.mp3",label:"Belli"},{value:"sending2.mp3",label:"Oranger"}],x={READ:"read"};var f=t(75828);let p=(0,f.createServerReference)("7f3b47fefeb4cb1c9b05b5c05405c54680036e61eb",f.callServer,void 0,f.findSourceMapURL,"generateToken");var h=t(33326),v=t(85060),g=t(14505),j=t(2615),N=t(12115),b=t(69606),y=t(71319),w=t(14085),_=t(34839),z=t(9955),S=t(15785),A=t(11536);let M=e=>{let{contactForm:s,onCreateContact:t}=e,{isCreating:r}=o();return(0,a.jsx)("div",{className:"h-screen w-full flex z-40 relative",children:(0,a.jsx)("div",{className:"flex justify-center items-center z-50 w-full",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(A.hFS,{size:120,className:"dark:text-blue-400 text-blue-500"}),(0,a.jsx)("h1",{className:"text-3xl font-spaceGrotesk font-bold",children:"Add contacts to start chatting"}),(0,a.jsx)(_.lV,{...s,children:(0,a.jsxs)("form",{onSubmit:s.handleSubmit(t),className:"space-y-2 w-full",children:[(0,a.jsx)(_.zB,{control:s.control,name:"email",render:e=>{let{field:s}=e;return(0,a.jsxs)(_.eI,{children:[(0,a.jsx)(S.J,{children:"Email"}),(0,a.jsx)(_.MJ,{children:(0,a.jsx)(z.p,{placeholder:"example@gmail.com",disabled:r,className:"h-10 bg-secondary",...s})}),(0,a.jsx)(_.C5,{className:"text-xs text-red-500"})]})}}),(0,a.jsx)(w.$,{type:"submit",className:"w-full",size:"lg",disabled:r,children:"Submit"})]})})]})})})};var C=t(29602),R=t(69253),k=t(64906),U=t(98867),E=t(73580),T=t(19993),F=t(5565),O=t(10993),D=t(46967),I=t(33565);let V=O.bL,P=O.l9;O.YJ,O.ZL,O.Pb,O.z6,N.forwardRef((e,s)=>{let{className:t,inset:r,children:l,...n}=e;return(0,a.jsxs)(O.ZP,{ref:s,className:(0,C.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",r&&"pl-8",t),...n,children:[l,(0,a.jsx)(D.A,{className:"ml-auto h-4 w-4"})]})}).displayName=O.ZP.displayName,N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(O.G5,{ref:s,className:(0,C.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}).displayName=O.G5.displayName;let L=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(O.ZL,{children:(0,a.jsx)(O.UC,{ref:s,className:(0,C.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})})});L.displayName=O.UC.displayName;let B=N.forwardRef((e,s)=>{let{className:t,inset:r,...l}=e;return(0,a.jsx)(O.q7,{ref:s,className:(0,C.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",t),...l})});B.displayName=O.q7.displayName,N.forwardRef((e,s)=>{let{className:t,children:r,checked:l,...n}=e;return(0,a.jsxs)(O.H_,{ref:s,className:(0,C.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:l,...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(O.VF,{children:(0,a.jsx)(U.A,{className:"h-4 w-4"})})}),r]})}).displayName=O.H_.displayName,N.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(O.hN,{ref:s,className:(0,C.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(O.VF,{children:(0,a.jsx)(I.A,{className:"h-4 w-4 fill-current"})})}),r]})}).displayName=O.hN.displayName,N.forwardRef((e,s)=>{let{className:t,inset:r,...l}=e;return(0,a.jsx)(O.JU,{ref:s,className:(0,C.cn)("px-2 py-1.5 text-sm font-semibold text-foreground",r&&"pl-8",t),...l})}).displayName=O.JU.displayName;let J=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(O.wv,{ref:s,className:(0,C.cn)("-mx-1 my-1 h-px bg-border",t),...r})});J.displayName=O.wv.displayName;let $=e=>{let{message:s,onReaction:t,onDeleteMessage:r}=e,{currentContact:l,setEditedMessage:n}=d();return(0,a.jsxs)(V,{children:[(0,a.jsx)(P,{asChild:!0,children:(0,a.jsx)("div",{className:(0,C.cn)("m-2.5 font-medium text-xs flex",s.receiver._id===(null==l?void 0:l._id)?"justify-start":"justify-end"),children:(0,a.jsxs)("div",{className:(0,C.cn)("relative inline p-2 pl-2.5 pr-12 max-w-full",s.receiver._id===(null==l?void 0:l._id)?"bg-primary":"bg-secondary"),children:[s.image&&(0,a.jsx)(F.default,{src:s.image,alt:s.image,width:200,height:150}),s.text.length>0&&(0,a.jsx)("p",{className:"text-sm text-white",children:s.text}),(0,a.jsxs)("div",{className:"right-1 bottom-0 absolute opacity-60 text-[9px] flex gap-[3px]",children:[(0,a.jsx)("p",{children:(0,R.GP)(s.updatedAt,"hh:mm")}),(0,a.jsx)("div",{className:"self-end",children:s.receiver._id===(null==l?void 0:l._id)&&(s.status===x.READ?(0,a.jsx)(k.A,{size:12}):(0,a.jsx)(U.A,{size:12}))})]}),(0,a.jsx)("span",{className:"absolute -right-2 -bottom-2",children:s.reaction})]})})}),(0,a.jsxs)(L,{className:"w-56 p-0 mb-10",children:[(0,a.jsx)(B,{className:"grid grid-cols-5",children:["\uD83D\uDC4D","\uD83D\uDE02","❤️","\uD83D\uDE0D","\uD83D\uDC4E"].map(e=>(0,a.jsx)("div",{className:(0,C.cn)("text-xl cursor-pointer p-1 hover:bg-primary/50 transition-all",s.reaction===e&&"bg-primary/50"),onClick:()=>t(e,s._id),children:e},e))}),s.sender._id!==(null==l?void 0:l._id)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J,{}),!s.image&&(0,a.jsxs)(B,{className:"cursor-pointer",onClick:()=>n(s),children:[(0,a.jsx)(E.A,{size:14,className:"mr-2"}),(0,a.jsx)("span",{children:"Edit"})]}),(0,a.jsxs)(B,{className:"cursor-pointer",onClick:()=>r(s._id),children:[(0,a.jsx)(T.A,{size:14,className:"mr-2"}),(0,a.jsx)("span",{children:"Delete"})]})]})]})]})};function G(e){let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,C.cn)("animate-pulse rounded-md bg-primary/10",s),...t})}let H=e=>{let{isReceived:s}=e;return(0,a.jsx)("div",{className:(0,C.cn)("m-2.5 font-medium text-xs flex",s?"justify-start":"justify-end"),children:(0,a.jsxs)(G,{className:(0,C.cn)("relative inline p-2 pl-2.5 pr-12",s?"bg-primary/20":"bg-secondary/20"),children:[(0,a.jsx)(G,{className:"w-36 h-5"}),(0,a.jsx)("span",{className:"absolute text-xs right-1 bottom-0 opacity-60",children:"✔"})]})})},Y=()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(H,{isReceived:!0})});var Z=t(66217),q=t(40767);let Q=Z.bL,X=Z.l9,W=Z.ZL;Z.bm;let K=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Z.hJ,{ref:s,className:(0,C.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});K.displayName=Z.hJ.displayName;let ee=N.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(W,{children:[(0,a.jsx)(K,{}),(0,a.jsxs)(Z.UC,{ref:s,className:(0,C.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[r,(0,a.jsxs)(Z.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(q.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});ee.displayName=Z.UC.displayName;let es=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,C.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};es.displayName="DialogHeader";let et=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Z.hE,{ref:s,className:(0,C.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});et.displayName=Z.hE.displayName;let ea=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Z.VY,{ref:s,className:(0,C.cn)("text-sm text-muted-foreground",t),...r})});ea.displayName=Z.VY.displayName;var er=t(80532);let el=er.bL,en=er.l9;er.Mz;let ei=N.forwardRef((e,s)=>{let{className:t,align:r="center",sideOffset:l=4,...n}=e;return(0,a.jsx)(er.ZL,{children:(0,a.jsx)(er.UC,{ref:s,align:r,sideOffset:l,className:(0,C.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});ei.displayName=er.UC.displayName;var ed=t(53696);let eo=(0,ed.Jt)(),ec=(0,ed.Wi)();var eu=t(21263),em=t(52793),ex=t(15015),ef=t(65843),ep=t(28283),eh=t(67113);let ev=e=>{let{onSubmitMessage:s,messageForm:t,messages:r,onReadMessages:l,onReaction:n,onDeleteMessage:i,onTyping:c}=e,[u,m]=(0,N.useState)(!1),{loadMessages:x}=o(),{editedMessage:f,setEditedMessage:p,currentContact:h}=d(),{data:v}=(0,j.useSession)(),{resolvedTheme:g}=(0,eh.D)(),b=(0,N.useRef)(null),y=(0,N.useRef)(null),S=r.filter((e,s,t)=>{var a,r;return(e.sender._id===(null==v?void 0:null===(a=v.currentUser)||void 0===a?void 0:a._id)&&e.receiver._id===(null==h?void 0:h._id)||e.sender._id===(null==h?void 0:h._id)&&e.receiver._id===(null==v?void 0:null===(r=v.currentUser)||void 0===r?void 0:r._id))&&s===t.findIndex(s=>s._id===e._id)});(0,N.useEffect)(()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),l()},[r]),(0,N.useEffect)(()=>{if(f){var e;t.setValue("text",f.text),null===(e=y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}},[f]);let A=e=>{var s,a;let r=b.current;if(!r)return;let l=t.getValues("text"),n=null!==(s=r.selectionStart)&&void 0!==s?s:0,i=null!==(a=r.selectionEnd)&&void 0!==a?a:0,d=l.slice(0,n)+e+l.slice(i);t.setValue("text",d),setTimeout(()=>{r.setSelectionRange(n+e.length,n+e.length)},0)};return(0,a.jsxs)("div",{className:"flex flex-col justify-end z-40 min-h-[92vh] sidebar-custom-scrollbar overflow-y-scroll",children:[x&&(0,a.jsx)(Y,{}),S.map((e,s)=>(0,a.jsx)($,{message:e,onReaction:n,onDeleteMessage:i},s)),0===r.length&&(0,a.jsx)("div",{className:"w-full h-[88vh] flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-[100px] cursor-pointer",onClick:()=>s({text:"✋"}),children:"✋"})}),(0,a.jsx)(_.lV,{...t,children:(0,a.jsxs)("form",{onSubmit:t.handleSubmit(s),className:"w-full flex relative",ref:y,children:[(0,a.jsxs)(Q,{open:u,onOpenChange:m,children:[(0,a.jsx)(X,{asChild:!0,children:(0,a.jsx)(w.$,{size:"icon",type:"button",variant:"secondary",children:(0,a.jsx)(ex.A,{})})}),(0,a.jsxs)(ee,{children:[(0,a.jsx)(es,{children:(0,a.jsx)(et,{})}),(0,a.jsx)(ec,{endpoint:"imageUploader",onClientUploadComplete:e=>{s({text:"",image:e[0].url}),m(!1)},config:{appendOnPaste:!0,mode:"auto"}})]})]}),(0,a.jsx)(_.zB,{control:t.control,name:"text",render:e=>{let{field:s}=e;return(0,a.jsx)(_.eI,{className:"w-full",children:(0,a.jsx)(_.MJ,{children:(0,a.jsx)(z.p,{className:"bg-secondary border-l border-l-muted-foreground border-r border-r-muted-foreground h-9",placeholder:"Type a message",value:s.value,onBlur:()=>s.onBlur(),onChange:e=>{s.onChange(e.target.value),c(e),""===e.target.value&&p(null)},ref:b})})})}}),(0,a.jsxs)(el,{children:[(0,a.jsx)(en,{asChild:!0,children:(0,a.jsx)(w.$,{size:"icon",type:"button",variant:"secondary",children:(0,a.jsx)(ef.A,{})})}),(0,a.jsx)(ei,{className:"p-0 border-none rounded-md absolute right-6 bottom-0",children:(0,a.jsx)(em.A,{data:eu,theme:"dark"===g?"dark":"light",onEmojiSelect:e=>A(e.native)})})]}),(0,a.jsx)(w.$,{type:"submit",size:"icon",children:(0,a.jsx)(ep.A,{})})]})})]})};var eg=t(74920);let ej=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eg.bL,{ref:s,className:(0,C.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});ej.displayName=eg.bL.displayName;let eN=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eg._V,{ref:s,className:(0,C.cn)("aspect-square h-full w-full",t),...r})});eN.displayName=eg._V.displayName;let eb=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eg.H4,{ref:s,className:(0,C.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});eb.displayName=eg.H4.displayName;var ey=t(56436),ew=t(90434);let e_=N.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",decorative:l=!0,...n}=e;return(0,a.jsx)(ew.b,{ref:s,decorative:l,orientation:r,className:(0,C.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...n})});e_.displayName=ew.b.displayName;let ez=()=>{let e=(0,b.mN)({resolver:(0,v.u)(h.R1),defaultValues:{confirmText:""}}),{data:s}=(0,j.useSession)(),{mutate:t,isPending:r}=(0,ey.n)({mutationFn:async()=>{var e;let t=await p(null==s?void 0:null===(e=s.currentUser)||void 0===e?void 0:e._id),{data:a}=await u.g.delete("/api/user",{headers:{Authorization:"Bearer ".concat(t)}});return a},onSuccess:()=>{(0,j.signOut)(),(0,c.oR)({description:"Account deleted successfully"})}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Are you sure you want to delete your account? This action cannot be undone."}),(0,a.jsxs)(Q,{children:[(0,a.jsx)(X,{asChild:!0,children:(0,a.jsx)(w.$,{className:"mt-2 w-full font-spaceGrotesk font-bold",variant:"destructive",children:"Delete permenantly"})}),(0,a.jsxs)(ee,{children:[(0,a.jsxs)(es,{children:[(0,a.jsx)(et,{children:"Are you absolutely sure?"}),(0,a.jsx)(ea,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]}),(0,a.jsx)(e_,{}),(0,a.jsx)(_.lV,{...e,children:(0,a.jsxs)("form",{onSubmit:e.handleSubmit(function(){t()}),className:"space-y-2",children:[(0,a.jsx)(_.zB,{control:e.control,name:"confirmText",render:e=>{let{field:s}=e;return(0,a.jsxs)(_.eI,{children:[(0,a.jsxs)(_.Rr,{children:["Please type ",(0,a.jsx)("span",{className:"font-bold",children:"DELETE"})," to confirm."]}),(0,a.jsx)(_.MJ,{children:(0,a.jsx)(z.p,{disabled:r,className:"bg-secondary",...s})}),(0,a.jsx)(_.C5,{className:"text-xs text-red-500"})]})}}),(0,a.jsx)(w.$,{disabled:r,className:"w-full font-bold",children:"Submit"})]})})]})]})]})};var eS=t(13191),eA=t(37843);let eM=()=>{var e;let{data:s}=(0,j.useSession)(),[t,r]=(0,N.useState)(!1),l=(0,b.mN)({resolver:(0,v.u)(h.Pn),defaultValues:{email:"",oldEmail:(null==s?void 0:null===(e=s.currentUser)||void 0===e?void 0:e.email)||""}}),n=(0,b.mN)({resolver:(0,v.u)(h.b9),defaultValues:{email:"",otp:""}}),i=(0,ey.n)({mutationFn:async e=>{var t;let a=await p(null==s?void 0:null===(t=s.currentUser)||void 0===t?void 0:t._id),{data:r}=await u.g.post("/api/user/send-otp",{email:e},{headers:{Authorization:"Bearer ".concat(a)}});return r},onSuccess:e=>{let{email:s}=e;(0,c.oR)({description:"OTP sent to your email"}),n.setValue("email",s),r(!0)}}),d=(0,ey.n)({mutationFn:async e=>{var t;let a=await p(null==s?void 0:null===(t=s.currentUser)||void 0===t?void 0:t._id),{data:r}=await u.g.put("/api/user/email",{email:n.getValues("email"),otp:e},{headers:{Authorization:"Bearer ".concat(a)}});return r},onSuccess:()=>{(0,j.signOut)(),(0,c.oR)({description:"Email updated successfully"})}});return t?(0,a.jsx)(_.lV,{...n,children:(0,a.jsxs)("form",{onSubmit:n.handleSubmit(function(e){d.mutate(e.otp)}),className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"New email"}),(0,a.jsx)(z.p,{className:"h-10 bg-secondary",disabled:!0,value:l.watch("email")}),(0,a.jsx)(_.zB,{control:n.control,name:"otp",render:e=>{let{field:s}=e;return(0,a.jsxs)(_.eI,{children:[(0,a.jsx)(S.J,{children:"One-Time Password"}),(0,a.jsx)(_.MJ,{children:(0,a.jsxs)(eA.UV,{disabled:d.isPending,pattern:eS.UO,maxLength:6,...s,className:"w-full",children:[(0,a.jsxs)(eA.NV,{className:"w-full",children:[(0,a.jsx)(eA.sF,{className:"w-full h-10 text-xl dark:bg-primary-foreground bg-secondary",index:0}),(0,a.jsx)(eA.sF,{className:"w-full h-10 text-xl dark:bg-primary-foreground bg-secondary",index:1}),(0,a.jsx)(eA.sF,{className:"w-full h-10 text-xl dark:bg-primary-foreground bg-secondary",index:2})]}),(0,a.jsx)(eA.pf,{}),(0,a.jsxs)(eA.NV,{className:"w-full",children:[(0,a.jsx)(eA.sF,{className:"w-full h-10 text-xl dark:bg-primary-foreground bg-secondary",index:3}),(0,a.jsx)(eA.sF,{className:"w-full h-10 text-xl dark:bg-primary-foreground bg-secondary",index:4}),(0,a.jsx)(eA.sF,{className:"w-full h-10 text-xl dark:bg-primary-foreground bg-secondary",index:5})]})]})}),(0,a.jsx)(_.C5,{className:"text-xs text-red-500"})]})}}),(0,a.jsx)(w.$,{disabled:d.isPending,className:"w-full",type:"submit",children:"Submit"})]})}):(0,a.jsx)(_.lV,{...l,children:(0,a.jsxs)("form",{onSubmit:l.handleSubmit(function(e){i.mutate(e.email)}),className:"space-y-2",children:[(0,a.jsx)(_.zB,{control:l.control,name:"oldEmail",render:e=>{let{field:s}=e;return(0,a.jsxs)(_.eI,{children:[(0,a.jsx)(S.J,{children:"Current email"}),(0,a.jsx)(_.MJ,{children:(0,a.jsx)(z.p,{className:"h-10 bg-secondary",disabled:!0,...s})}),(0,a.jsx)(_.C5,{className:"text-xs text-red-500"})]})}}),(0,a.jsx)(_.zB,{control:l.control,name:"email",render:e=>{let{field:s}=e;return(0,a.jsxs)(_.eI,{children:[(0,a.jsx)(S.J,{children:"Enter a new email"}),(0,a.jsx)(_.MJ,{children:(0,a.jsx)(z.p,{disabled:i.isPending,placeholder:"example@gmail.com",className:"h-10 bg-secondary",...s})}),(0,a.jsx)(_.C5,{className:"text-xs text-red-500"})]})}}),(0,a.jsx)(w.$,{disabled:i.isPending,type:"submit",className:"w-full",children:"Verify email"})]})})},eC=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,C.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...r})});eC.displayName="Textarea";let eR=()=>{var e,s,t;let{data:r,update:l}=(0,j.useSession)(),n=(0,b.mN)({resolver:(0,v.u)(h.Fk),defaultValues:{firstName:null==r?void 0:null===(e=r.currentUser)||void 0===e?void 0:e.firstName,lastName:null==r?void 0:null===(s=r.currentUser)||void 0===s?void 0:s.lastName,bio:null==r?void 0:null===(t=r.currentUser)||void 0===t?void 0:t.bio}}),{mutate:i,isPending:d}=(0,ey.n)({mutationFn:async e=>{var s;let t=await p(null==r?void 0:null===(s=r.currentUser)||void 0===s?void 0:s._id),{data:a}=await u.g.put("/api/user/profile",e,{headers:{Authorization:"Bearer ".concat(t)}});return a},onSuccess:()=>{(0,c.oR)({description:"Profile updated successfully"}),l()}});return(0,a.jsx)(_.lV,{...n,children:(0,a.jsxs)("form",{onSubmit:n.handleSubmit(e=>{i(e)}),className:"space-y-2",children:[(0,a.jsx)(_.zB,{control:n.control,name:"firstName",render:e=>{let{field:s}=e;return(0,a.jsxs)(_.eI,{children:[(0,a.jsx)(S.J,{children:"First name"}),(0,a.jsx)(_.MJ,{children:(0,a.jsx)(z.p,{disabled:d,placeholder:"John",className:"bg-secondary",...s})}),(0,a.jsx)(_.C5,{className:"text-xs text-red-500"})]})}}),(0,a.jsx)(_.zB,{control:n.control,name:"lastName",render:e=>{let{field:s}=e;return(0,a.jsxs)(_.eI,{children:[(0,a.jsx)(S.J,{children:"Last name"}),(0,a.jsx)(_.MJ,{children:(0,a.jsx)(z.p,{disabled:d,placeholder:"Doe",className:"bg-secondary",...s})})]})}}),(0,a.jsx)(_.zB,{control:n.control,name:"bio",render:e=>{let{field:s}=e;return(0,a.jsxs)(_.eI,{children:[(0,a.jsx)(_.lR,{children:"Bio"}),(0,a.jsx)(_.MJ,{children:(0,a.jsx)(eC,{disabled:d,placeholder:"Enter anyhting about yourself",className:"bg-secondary",...s})})]})}}),(0,a.jsx)(w.$,{disabled:d,type:"submit",className:"w-full",children:"Submit"})]})})};var ek=t(51719),eU=t(56996),eE=t(40886),eT=t(82920);let eF=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eT.bL,{className:(0,C.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:(0,a.jsx)(eT.zi,{className:(0,C.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});eF.displayName=eT.bL.displayName;let eO=()=>{var e,s,t,r;let[n,i]=(0,N.useState)(!1),[d,o]=(0,N.useState)(!1),[x,f]=(0,N.useState)(""),{data:h,update:v}=(0,j.useSession)(),{playSound:g}=l(),{mutate:b,isPending:y}=(0,ey.n)({mutationFn:async e=>{var s;let t=await p(null==h?void 0:null===(s=h.currentUser)||void 0===s?void 0:s._id),{data:a}=await u.g.put("/api/user/profile",e,{headers:{Authorization:"Bearer ".concat(t)}});return a},onSuccess:()=>{(0,c.oR)({description:"Profile updated successfully"}),v(),i(!1),o(!1)}}),_=e=>{f(e),g(e)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between relative",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("p",{className:"font-spaceGrotesk",children:"Notification Sound"}),(0,a.jsx)("p",{className:"font-spaceGrotesk text-muted-foreground text-xs",children:(0,C.O)(null==h?void 0:null===(e=h.currentUser)||void 0===e?void 0:e.notificationSound)})]}),(0,a.jsxs)(el,{open:n,onOpenChange:i,children:[(0,a.jsx)(en,{asChild:!0,children:(0,a.jsxs)(w.$,{size:"sm",children:["Select ",(0,a.jsx)(ek.A,{})]})}),(0,a.jsxs)(ei,{className:"w-80 absolute -right-12",children:[(0,a.jsx)("div",{className:"flex flex-col space-y-1",children:m.map(e=>{var s;return(0,a.jsxs)("div",{className:(0,C.cn)("flex justify-between items-center bg-secondary cursor-pointer hover:bg-primary-foreground",x===e.value&&"bg-primary-foreground"),onClick:()=>_(e.value),children:[(0,a.jsx)(w.$,{size:"sm",variant:"ghost",className:"justify-start ",children:e.label}),(null==h?void 0:null===(s=h.currentUser)||void 0===s?void 0:s.notificationSound)===e.value?(0,a.jsx)(w.$,{size:"icon",children:(0,a.jsx)(eU.A,{})}):(0,a.jsx)(w.$,{size:"icon",variant:"ghost",children:(0,a.jsx)(eE.A,{})})]},e.label)})}),(0,a.jsx)(w.$,{className:"w-full mt-2 font-bold",disabled:y,onClick:()=>b({notificationSound:x}),children:"Submit"})]})]})]}),(0,a.jsx)(e_,{className:"my-3"}),(0,a.jsxs)("div",{className:"flex items-center justify-between relative",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("p",{className:"font-spaceGrotesk",children:"Sending Sound"}),(0,a.jsx)("p",{className:"font-spaceGrotesk text-muted-foreground text-xs",children:(0,C.O)(null==h?void 0:null===(s=h.currentUser)||void 0===s?void 0:s.sendingSound)})]}),(0,a.jsxs)(el,{open:d,onOpenChange:o,children:[(0,a.jsx)(en,{asChild:!0,children:(0,a.jsxs)(w.$,{size:"sm",children:["Select ",(0,a.jsx)(ek.A,{})]})}),(0,a.jsxs)(ei,{className:"w-80 absolute -right-12",children:[(0,a.jsx)("div",{className:"flex flex-col space-y-1",children:m.map(e=>{var s;return(0,a.jsxs)("div",{className:(0,C.cn)("flex justify-between items-center bg-secondary cursor-pointer hover:bg-primary-foreground",x===e.value&&"bg-primary-foreground"),onClick:()=>_(e.value),children:[(0,a.jsx)(w.$,{size:"sm",variant:"ghost",className:"justify-start",children:e.label}),(null==h?void 0:null===(s=h.currentUser)||void 0===s?void 0:s.sendingSound)===e.value?(0,a.jsx)(w.$,{size:"icon",children:(0,a.jsx)(eU.A,{})}):(0,a.jsx)(w.$,{size:"icon",variant:"ghost",children:(0,a.jsx)(eE.A,{})})]},e.label)})}),(0,a.jsx)(w.$,{className:"w-full mt-2 font-bold",disabled:y,onClick:()=>b({sendingSound:x}),children:"Submit"})]})]})]}),(0,a.jsx)(e_,{className:"my-3"}),(0,a.jsxs)("div",{className:"flex items-center justify-between relative",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("p",{children:"Mode Mute"}),(0,a.jsx)("p",{className:"text-muted-foreground text-xs",children:(null==h?void 0:null===(t=h.currentUser)||void 0===t?void 0:t.muted)?"Unmuted":"Muted"})]}),(0,a.jsx)(eF,{checked:!(null==h?void 0:null===(r=h.currentUser)||void 0===r?void 0:r.muted),onCheckedChange:()=>{var e;return b({muted:!(null==h?void 0:null===(e=h.currentUser)||void 0===e?void 0:e.muted)})},disabled:y})]})]})};var eD=t(85217);let eI=eD.bL,eV=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eD.q7,{ref:s,className:(0,C.cn)("border-b",t),...r})});eV.displayName="AccordionItem";let eP=N.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsx)(eD.Y9,{className:"flex",children:(0,a.jsxs)(eD.l9,{ref:s,className:(0,C.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",t),...l,children:[r,(0,a.jsx)(ek.A,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});eP.displayName=eD.l9.displayName;let eL=N.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsx)(eD.UC,{ref:s,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,a.jsx)("div",{className:(0,C.cn)("pb-4 pt-0",t),children:r})})});eL.displayName=eD.UC.displayName;var eB=t(31027);let eJ=Z.bL,e$=Z.l9;Z.bm;let eG=Z.ZL,eH=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Z.hJ,{className:(0,C.cn)("fixed inset-0 z-50  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s})});eH.displayName=Z.hJ.displayName;let eY=(0,eB.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),eZ=N.forwardRef((e,s)=>{let{side:t="right",className:r,children:l,...n}=e;return(0,a.jsxs)(eG,{children:[(0,a.jsx)(eH,{}),(0,a.jsxs)(Z.UC,{ref:s,className:(0,C.cn)(eY({side:t}),r),...n,children:[(0,a.jsxs)(Z.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(q.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]}),l]})]})});eZ.displayName=Z.UC.displayName;let eq=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,C.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};eq.displayName="SheetHeader";let eQ=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Z.hE,{ref:s,className:(0,C.cn)("text-lg font-semibold text-foreground",t),...r})});eQ.displayName=Z.hE.displayName;let eX=N.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Z.VY,{ref:s,className:(0,C.cn)("text-sm text-muted-foreground",t),...r})});eX.displayName=Z.VY.displayName;var eW=t(86710),eK=t(85047),e0=t(57517),e1=t(49187),e2=t(87725),e5=t(22104),e4=t(8427),e3=t(38684);let e9=()=>{var e,s,t,r,l;let[n,i]=(0,N.useState)(!1),{resolvedTheme:d,setTheme:o}=(0,eh.D)(),{data:m,update:x}=(0,j.useSession)(),{mutate:f,isPending:h}=(0,ey.n)({mutationFn:async e=>{var s;let t=await p(null==m?void 0:null===(s=m.currentUser)||void 0===s?void 0:s._id),{data:a}=await u.g.put("/api/user/profile",e,{headers:{Authorization:"Bearer ".concat(t)}});return a},onSuccess:()=>{(0,c.oR)({description:"Profile updated successfully"}),x()}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(el,{children:[(0,a.jsx)(en,{asChild:!0,children:(0,a.jsx)(w.$,{size:"icon",variant:"secondary",className:"max-md:w-full",children:(0,a.jsx)(eW.A,{})})}),(0,a.jsxs)(ei,{className:"p-0 w-80",children:[(0,a.jsxs)("h2",{className:"pt-2 pl-2 text-muted-foreground text-sm",children:["Settings:"," ",(0,a.jsx)("span",{className:"text-white",children:null==m?void 0:null===(e=m.currentUser)||void 0===e?void 0:e.email})]}),(0,a.jsx)(e_,{className:"my-2"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"flex justify-between items-center p-2 hover:bg-secondary cursor-pointer",onClick:()=>i(!0),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eK.A,{size:16}),(0,a.jsx)("span",{className:"text-sm",children:"Profile"})]})}),(0,a.jsx)("div",{className:"flex justify-between items-center p-2 hover:bg-secondary cursor-pointer",onClick:()=>window.location.reload(),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(e0.A,{size:16}),(0,a.jsx)("span",{className:"text-sm",children:"Create contact"})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 hover:bg-secondary",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(e1.A,{size:16}),(0,a.jsx)("span",{className:"text-sm",children:"Mute"})]}),(0,a.jsx)(eF,{checked:!(null==m?void 0:null===(s=m.currentUser)||void 0===s?void 0:s.muted),onCheckedChange:()=>{var e;return f({muted:!(null==m?void 0:null===(e=m.currentUser)||void 0===e?void 0:e.muted)})},disabled:h})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 hover:bg-secondary",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["dark"===d?(0,a.jsx)(e2.A,{size:16}):(0,a.jsx)(e5.A,{size:16}),(0,a.jsx)("span",{className:"text-sm",children:"dark"===d?"Light mode":"Dark mode"})]}),(0,a.jsx)(eF,{checked:"dark"===d,onCheckedChange:()=>o("dark"===d?"light":"dark")})]}),(0,a.jsx)("div",{className:"flex justify-between items-center bg-destructive p-2 cursor-pointer",onClick:()=>(0,j.signOut)(),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(e4.A,{size:16}),(0,a.jsx)("span",{className:"text-sm",children:"Logout"})]})})]})]})]}),(0,a.jsx)(eJ,{open:n,onOpenChange:i,children:(0,a.jsxs)(eZ,{side:"left",className:"w-80 p-2 max-md:w-full",children:[(0,a.jsxs)(eq,{children:[(0,a.jsx)(eQ,{className:"text-2xl",children:"My profile"}),(0,a.jsx)(eX,{children:"Setting up your profile will help you connect with your friends and family easily."})]}),(0,a.jsx)(e_,{className:"my-2"}),(0,a.jsxs)("div",{className:"mx-auto w-1/2 max-md:w-1/4 h-36 relative",children:[(0,a.jsxs)(ej,{className:"w-full h-36",children:[(0,a.jsx)(eN,{src:null==m?void 0:null===(t=m.currentUser)||void 0===t?void 0:t.avatar,alt:null==m?void 0:null===(r=m.currentUser)||void 0===r?void 0:r.email,className:"object-cover"}),(0,a.jsx)(eb,{className:"text-6xl uppercase font-spaceGrotesk",children:null==m?void 0:null===(l=m.currentUser)||void 0===l?void 0:l.email.charAt(0)})]}),(0,a.jsx)(eo,{endpoint:"imageUploader",onClientUploadComplete:e=>{f({avatar:e[0].url})},config:{appendOnPaste:!0,mode:"auto"},className:"absolute right-0 bottom-0",appearance:{allowedContent:{display:"none"},button:{width:40,height:40,borderRadius:"100%"}},content:{button:(0,a.jsx)(e3.A,{size:16})}})]}),(0,a.jsxs)(eI,{type:"single",collapsible:!0,className:"mt-4",children:[(0,a.jsxs)(eV,{value:"item-1",children:[(0,a.jsx)(eP,{className:"bg-secondary px-2",children:"Basic information"}),(0,a.jsx)(eL,{className:"px-2 mt-2",children:(0,a.jsx)(eR,{})})]}),(0,a.jsxs)(eV,{value:"item-2",className:"mt-2",children:[(0,a.jsx)(eP,{className:"bg-secondary px-2",children:"Email"}),(0,a.jsx)(eL,{className:"px-2 mt-2",children:(0,a.jsx)(eM,{})})]}),(0,a.jsxs)(eV,{value:"item-3",className:"mt-2",children:[(0,a.jsx)(eP,{className:"bg-secondary px-2",children:"Notification"}),(0,a.jsx)(eL,{className:"mt-2",children:(0,a.jsx)(eO,{})})]}),(0,a.jsxs)(eV,{value:"item-4",className:"mt-2",children:[(0,a.jsx)(eP,{className:"bg-secondary px-2",children:"Danger zone"}),(0,a.jsx)(eL,{className:"my-2 px-2",children:(0,a.jsx)(ez,{})})]})]})]})})]})},e6=e=>{let{contacts:s}=e,[t,r]=(0,N.useState)(""),{onlineUsers:l}=(0,n.A)(),{setCurrentContact:i,currentContact:o}=d(),{data:c}=(0,j.useSession)(),u=s.filter(e=>e.email.toLowerCase().includes(t.toLowerCase())).sort((e,s)=>{var t,a;let r=(null===(t=e.lastMessage)||void 0===t?void 0:t.updatedAt)?new Date(e.lastMessage.updatedAt).getTime():0;return((null===(a=s.lastMessage)||void 0===a?void 0:a.updatedAt)?new Date(s.lastMessage.updatedAt).getTime():0)-r}),m=e=>{var s,t,r,n,d,u;return(0,a.jsxs)("div",{className:(0,C.cn)("flex justify-between items-center cursor-pointer hover:bg-secondary/50 md:p-2",(null==o?void 0:o._id)===e._id&&"bg-secondary/50"),onClick:()=>{(null==o?void 0:o._id)!==e._id&&i(e)},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(ej,{className:"z-40",children:[(0,a.jsx)(eN,{src:e.avatar,alt:e.email,className:"object-cover"}),(0,a.jsx)(eb,{className:"uppercase",children:e.email[0]})]}),l.some(s=>s._id===e._id)&&(0,a.jsx)("div",{className:"size-3 bg-green-500 absolute rounded-full bottom-0 right-0 !z-40"})]}),(0,a.jsxs)("div",{className:"max-md:hidden",children:[(0,a.jsx)("h2",{className:"capitalize line-clamp-1 text-sm",children:e.email.split("@")[0]}),(null===(s=e.lastMessage)||void 0===s?void 0:s.image)&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(F.default,{src:e.lastMessage.image,alt:e.email,width:20,height:20,className:"object-cover"}),(0,a.jsx)("p",{className:(0,C.cn)("text-xs line-clamp-1",e.lastMessage?(null===(t=e.lastMessage)||void 0===t?void 0:t.sender._id)===(null==c?void 0:null===(r=c.currentUser)||void 0===r?void 0:r._id)?"text-muted-foreground":e.lastMessage.status!==x.READ?"text-foreground":"text-muted-foreground":"text-muted-foreground"),children:"Photo"})]}),!(null===(n=e.lastMessage)||void 0===n?void 0:n.image)&&(0,a.jsx)("p",{className:(0,C.cn)("text-xs line-clamp-1",e.lastMessage?(null===(d=e.lastMessage)||void 0===d?void 0:d.sender._id)===(null==c?void 0:null===(u=c.currentUser)||void 0===u?void 0:u._id)?"text-muted-foreground":e.lastMessage.status!==x.READ?"text-foreground":"text-muted-foreground":"text-muted-foreground"),children:e.lastMessage?(0,C.S)(e.lastMessage.text,25):"No messages yet"})]})]}),e.lastMessage&&(0,a.jsx)("div",{className:"self-end max-md:hidden",children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,R.GP)(e.lastMessage.updatedAt,"hh:mm a")})})]})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center bg-background md:pl-2 sticky top-0 z-50",children:[(0,a.jsx)(e9,{}),(0,a.jsx)("div",{className:"md:m-2 w-full max-md:hidden",children:(0,a.jsx)(z.p,{className:"bg-secondary",value:t,onChange:e=>r(e.target.value),type:"text",placeholder:"Search..."})})]}),(0,a.jsx)("div",{className:"max-md:mt-2",children:0===u.length?(0,a.jsx)("div",{className:"w-full h-[95vh] flex justify-center items-center text-center text-muted-foreground",children:(0,a.jsx)("p",{children:"Contact list is empty"})}):u.map(e=>(0,a.jsx)("div",{children:m(e)},e._id))})]})},e8=e=>{var s;let{messages:t}=e,{currentContact:r}=d(),{onlineUsers:l}=(0,n.A)(),{typing:i}=o();return(0,a.jsxs)("div",{className:"w-full flex items-center justify-between sticky top-0 z-50 h-[8vh] p-2 border-b bg-background",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(ej,{className:"z-40",children:[(0,a.jsx)(eN,{src:null==r?void 0:r.avatar,alt:null==r?void 0:r.email,className:"object-cover"}),(0,a.jsx)(eb,{className:"uppercase",children:null==r?void 0:r.email[0]})]}),(0,a.jsxs)("div",{className:"ml-2",children:[(0,a.jsx)("h2",{className:"font-medium text-sm",children:null==r?void 0:r.email}),(null==r?void 0:r._id)===(null==i?void 0:null===(s=i.sender)||void 0===s?void 0:s._id)?(null==i?void 0:i.message.length)>0&&(0,a.jsxs)("div",{className:"text-xs flex items-center gap-1 text-muted-foreground",children:[(0,a.jsx)("p",{className:"text-secondary-foreground animate-pulse line-clamp-1",children:(0,C.S)(null==i?void 0:i.message,20)}),(0,a.jsx)("div",{className:"self-end mb-1",children:(0,a.jsxs)("div",{className:"flex justify-center items-center gap-1",children:[(0,a.jsx)("div",{className:"w-1 h-1 bg-secondary-foreground rounded-full animate-bounce [animation-delay:-0.3s]"}),(0,a.jsx)("div",{className:"w-1 h-1 bg-secondary-foreground rounded-full animate-bounce [animation-delay:-0.10s]"}),(0,a.jsx)("div",{className:"w-1 h-1 bg-secondary-foreground rounded-full animate-bounce [animation-delay:-0.15s]"})]})})]}):i.message&&(0,a.jsx)("p",{className:"text-xs",children:l.some(e=>e._id===(null==r?void 0:r._id))?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-green-500",children:"●"})," Online"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"●"})," Last seen recently"]})}),!i.message&&(0,a.jsx)("p",{className:"text-xs",children:l.some(e=>e._id===(null==r?void 0:r._id))?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-green-500",children:"●"})," Online"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"●"})," Last seen recently"]})})]})]}),(0,a.jsxs)(eJ,{children:[(0,a.jsx)(e$,{asChild:!0,children:(0,a.jsx)(w.$,{size:"icon",variant:"secondary",children:(0,a.jsx)(eK.A,{})})}),(0,a.jsxs)(eZ,{className:"w-80 max-md:w-full p-2 overflow-y-scroll sidebar-custom-scrollbar",children:[(0,a.jsx)(eq,{children:(0,a.jsx)(eQ,{})}),(0,a.jsx)("div",{className:"mx-auto w-1/2 max-md:w-1/4 h-36 relative",children:(0,a.jsxs)(ej,{className:"w-full h-36",children:[(0,a.jsx)(eN,{src:null==r?void 0:r.avatar,alt:null==r?void 0:r.email,className:"object-cover"}),(0,a.jsx)(eb,{className:"text-6xl uppercase font-spaceGrotesk",children:null==r?void 0:r.email[0]})]})}),(0,a.jsx)(e_,{className:"my-2"}),(0,a.jsx)("h1",{className:"text-center capitalize font-spaceGrotesk text-xl",children:null==r?void 0:r.email}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(null==r?void 0:r.firstName)&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-4",children:[(0,a.jsx)("p",{className:"font-spaceGrotesk",children:"First Name: "}),(0,a.jsx)("p",{className:"font-spaceGrotesk text-muted-foreground",children:null==r?void 0:r.firstName})]}),(null==r?void 0:r.lastName)&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-4",children:[(0,a.jsx)("p",{className:"font-spaceGrotesk",children:"Last Name: "}),(0,a.jsx)("p",{className:"font-spaceGrotesk text-muted-foreground",children:null==r?void 0:r.lastName})]}),(null==r?void 0:r.bio)&&(0,a.jsx)("div",{className:"flex items-center gap-1 mt-4",children:(0,a.jsxs)("p",{className:"font-spaceGrotesk",children:["About:"," ",(0,a.jsx)("span",{className:"font-spaceGrotesk text-muted-foreground",children:null==r?void 0:r.bio})]})}),(0,a.jsx)(e_,{className:"my-2"}),(0,a.jsx)("h2",{className:"text-xl",children:"Image"}),(0,a.jsx)("div",{className:"flex flex-col space-y-2",children:t.filter(e=>e.image).map(e=>(0,a.jsx)("div",{className:"w-full h-36 relative",children:(0,a.jsx)(F.default,{src:e.image,alt:e._id,fill:!0,className:"object-cover rounded-md"})},e._id))})]})]})]})]})},e7=()=>{let[e,s]=(0,N.useState)([]),[t,r]=(0,N.useState)([]),{setCreating:i,setLoading:m,isLoading:f,setLoadMessages:w,setTyping:_}=o(),{currentContact:z,editedMessage:S,setEditedMessage:A}=d(),{data:C}=(0,j.useSession)(),{setOnlineUsers:R}=(0,n.A)(),{playSound:k}=l(),U=(0,N.useRef)(null),E=(0,b.mN)({resolver:(0,v.u)(h.y4),defaultValues:{email:""}}),T=(0,b.mN)({resolver:(0,v.u)(h.HQ),defaultValues:{text:"",image:""}}),F=async()=>{var e;m(!0);let t=await p(null==C?void 0:null===(e=C.currentUser)||void 0===e?void 0:e._id);try{let{data:e}=await u.g.get("/api/user/contacts",{headers:{Authorization:"Bearer ".concat(t)}});s(e.contacts)}catch(e){(0,c.oR)({description:"Cannot fetch contacts",variant:"destructive"})}finally{m(!1)}},O=async()=>{var e;w(!0);let t=await p(null==C?void 0:null===(e=C.currentUser)||void 0===e?void 0:e._id);try{let{data:e}=await u.g.get("/api/user/messages/".concat(null==z?void 0:z._id),{headers:{Authorization:"Bearer ".concat(t)}});r(e.messages),s(e=>e.map(e=>e._id===(null==z?void 0:z._id)?{...e,lastMessage:e.lastMessage?{...e.lastMessage,status:x.READ}:null}:e))}catch(e){(0,c.oR)({description:"Cannot fetch messages",variant:"destructive"})}finally{w(!1)}};(0,N.useEffect)(()=>{U.current=(0,y.io)("ws://telegram-clone-1.onrender.com")},[]),(0,N.useEffect)(()=>{var e,s,t;(null==C?void 0:null===(e=C.currentUser)||void 0===e?void 0:e._id)&&(null===(s=U.current)||void 0===s||s.emit("addOnlineUser",C.currentUser),null===(t=U.current)||void 0===t||t.on("getOnlineUsers",e=>{R(e.map(e=>e.user))}),F())},[null==C?void 0:C.currentUser]),(0,N.useEffect)(()=>{if(null==C?void 0:C.currentUser){var e,t,a,l,n,i;null===(e=U.current)||void 0===e||e.on("getCreatedUser",e=>{s(s=>s.some(s=>s._id===e._id)?s:[...s,e])}),null===(t=U.current)||void 0===t||t.on("getNewMessage",e=>{let{newMessage:t,sender:a,receiver:l}=e;_({message:"",sender:null}),(null==z?void 0:z._id)===t.sender._id&&r(e=>[...e,t]),s(e=>e.map(e=>e._id===a._id?{...e,lastMessage:{...t,status:(null==z?void 0:z._id)===a._id?x.READ:t.status}}:e)),l.muted||k(l.notificationSound)}),null===(a=U.current)||void 0===a||a.on("getReadMessages",e=>{r(s=>s.map(s=>e.find(e=>e._id===s._id)?{...s,status:x.READ}:s))}),null===(l=U.current)||void 0===l||l.on("getUpdatedMessage",e=>{let{updatedMessage:t,sender:a}=e;_({message:"",sender:null}),r(e=>e.map(e=>e._id===t._id?{...e,reaction:t.reaction,text:t.text}:e)),s(e=>e.map(e=>{var s;return e._id===a._id?{...e,lastMessage:(null===(s=e.lastMessage)||void 0===s?void 0:s._id)===t._id?t:e.lastMessage}:e}))}),null===(n=U.current)||void 0===n||n.on("getDeletedMessage",e=>{let{deletedMessage:t,sender:a,filteredMessages:l}=e;r(e=>e.filter(e=>e._id!==t._id));let n=l.length?l[l.length-1]:null;s(e=>e.map(e=>{var s;return e._id===a._id?{...e,lastMessage:(null===(s=e.lastMessage)||void 0===s?void 0:s._id)===t._id?n:e.lastMessage}:e}))}),null===(i=U.current)||void 0===i||i.on("getTyping",e=>{let{message:s,sender:t}=e;(null==z?void 0:z._id)===t._id&&_({message:s,sender:t})})}},[null==C?void 0:C.currentUser,null==z?void 0:z._id]),(0,N.useEffect)(()=>{(null==z?void 0:z._id)&&O()},[z]);let D=async e=>{var t,a,r,l;i(!0);let n=await p(null==C?void 0:null===(t=C.currentUser)||void 0===t?void 0:t._id);try{let{data:t}=await u.g.post("/api/user/contact",e,{headers:{Authorization:"Bearer ".concat(n)}});s(e=>[...e,t.contact]),null===(a=U.current)||void 0===a||a.emit("createContact",{currentUser:null==C?void 0:C.currentUser,receiver:t.contact}),(0,c.oR)({description:"Contact added successfully"}),E.reset()}catch(e){if(null===(l=e.response)||void 0===l?void 0:null===(r=l.data)||void 0===r?void 0:r.message)return(0,c.oR)({description:e.response.data.message,variant:"destructive"});return(0,c.oR)({description:"Something went wrong",variant:"destructive"})}finally{i(!1)}},I=async e=>{i(!0),(null==S?void 0:S._id)?P(S._id,e.text):V(e)},V=async e=>{var t,a;i(!0);let l=await p(null==C?void 0:null===(t=C.currentUser)||void 0===t?void 0:t._id);try{let{data:t}=await u.g.post("/api/user/message",{...e,receiver:null==z?void 0:z._id},{headers:{Authorization:"Bearer ".concat(l)}});r(e=>[...e,t.newMessage]),s(e=>e.map(e=>e._id===(null==z?void 0:z._id)?{...e,lastMessage:{...t.newMessage,status:x.READ}}:e)),T.reset(),null===(a=U.current)||void 0===a||a.emit("sendMessage",{newMessage:t.newMessage,receiver:t.receiver,sender:t.sender}),t.sender.muted||k(t.sender.sendingSound)}catch(e){(0,c.oR)({description:"Cannot send message",variant:"destructive"})}finally{i(!1)}},P=async(e,t)=>{var a,l;let n=await p(null==C?void 0:null===(a=C.currentUser)||void 0===a?void 0:a._id);try{let{data:a}=await u.g.put("/api/user/message/".concat(e),{text:t},{headers:{Authorization:"Bearer ".concat(n)}});r(e=>e.map(e=>e._id===a.updatedMessage._id?{...e,text:a.updatedMessage.text}:e)),null===(l=U.current)||void 0===l||l.emit("updateMessage",{updatedMessage:a.updatedMessage,receiver:z,sender:null==C?void 0:C.currentUser}),T.reset(),s(s=>s.map(s=>{var t;return s._id===(null==z?void 0:z._id)?{...s,lastMessage:(null===(t=s.lastMessage)||void 0===t?void 0:t._id)===e?a.updatedMessage:s.lastMessage}:s})),A(null)}catch(e){(0,c.oR)({description:"Cannot edit message",variant:"destructive"})}},L=async()=>{var e,s;let a=t.filter(e=>{var s;return e.receiver._id===(null==C?void 0:null===(s=C.currentUser)||void 0===s?void 0:s._id)}).filter(e=>e.status!==x.READ);if(0===a.length)return;let l=await p(null==C?void 0:null===(e=C.currentUser)||void 0===e?void 0:e._id);try{let{data:e}=await u.g.post("/api/user/message-read",{messages:a},{headers:{Authorization:"Bearer ".concat(l)}});null===(s=U.current)||void 0===s||s.emit("readMessages",{messages:e.messages,receiver:z}),r(s=>s.map(s=>e.messages.find(e=>e._id===s._id)?{...s,status:x.READ}:s))}catch(e){(0,c.oR)({description:"Cannot read messages",variant:"destructive"})}},B=async(e,s)=>{var t,a;let l=await p(null==C?void 0:null===(t=C.currentUser)||void 0===t?void 0:t._id);try{let{data:t}=await u.g.post("/api/user/reaction",{reaction:e,messageId:s},{headers:{Authorization:"Bearer ".concat(l)}});r(e=>e.map(e=>e._id===t.updatedMessage._id?{...e,reaction:t.updatedMessage.reaction}:e)),null===(a=U.current)||void 0===a||a.emit("updateMessage",{updatedMessage:t.updatedMessage,receiver:z,sender:null==C?void 0:C.currentUser})}catch(e){(0,c.oR)({description:"Cannot react to message",variant:"destructive"})}},J=async e=>{var a,l;let n=await p(null==C?void 0:null===(a=C.currentUser)||void 0===a?void 0:a._id);try{let{data:a}=await u.g.delete("/api/user/message/".concat(e),{headers:{Authorization:"Bearer ".concat(n)}}),i=t.filter(e=>e._id!==a.deletedMessage._id),d=i.length?i[i.length-1]:null;r(i),null===(l=U.current)||void 0===l||l.emit("deleteMessage",{deletedMessage:a.deletedMessage,sender:null==C?void 0:C.currentUser,receiver:z,filteredMessages:i}),s(s=>s.map(s=>{var t;return s._id===(null==z?void 0:z._id)?{...s,lastMessage:(null===(t=s.lastMessage)||void 0===t?void 0:t._id)===e?d:s.lastMessage}:s}))}catch(e){(0,c.oR)({description:"Cannot delete message",variant:"destructive"})}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"w-80 max-md:w-16 h-screen border-r fixed inset-0 z-50",children:[f&&(0,a.jsx)("div",{className:"w-full h-[95vh] flex justify-center items-center",children:(0,a.jsx)(g.A,{size:50,className:"animate-spin"})}),!f&&(0,a.jsx)(e6,{contacts:e})]}),(0,a.jsxs)("div",{className:"max-md:pl-16 pl-80 w-full",children:[!(null==z?void 0:z._id)&&(0,a.jsx)(M,{contactForm:E,onCreateContact:D}),(null==z?void 0:z._id)&&(0,a.jsxs)("div",{className:"w-full relative",children:[(0,a.jsx)(e8,{messages:t}),(0,a.jsx)(ev,{messageForm:T,onSubmitMessage:I,messages:t,onReadMessages:L,onReaction:B,onDeleteMessage:J,onTyping:e=>{var s;null===(s=U.current)||void 0===s||s.emit("typing",{receiver:z,sender:null==C?void 0:C.currentUser,message:e.target.value})}})]})]})]})}},14085:(e,s,t)=>{"use strict";t.d(s,{$:()=>o});var a=t(95155),r=t(12115),l=t(12317),n=t(31027),i=t(29602);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,asChild:o=!1,...c}=e,u=o?l.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(d({variant:r,size:n,className:t})),ref:s,...c})});o.displayName="Button"},34839:(e,s,t)=>{"use strict";t.d(s,{C5:()=>g,MJ:()=>h,Rr:()=>v,eI:()=>f,lR:()=>p,lV:()=>o,zB:()=>u});var a=t(95155),r=t(12115),l=t(12317),n=t(69606),i=t(29602),d=t(15785);let o=n.Op,c=r.createContext({}),u=e=>{let{...s}=e;return(0,a.jsx)(c.Provider,{value:{name:s.name},children:(0,a.jsx)(n.xI,{...s})})},m=()=>{let e=r.useContext(c),s=r.useContext(x),{getFieldState:t,formState:a}=(0,n.xW)(),l=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=s;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},x=r.createContext({}),f=r.forwardRef((e,s)=>{let{className:t,...l}=e,n=r.useId();return(0,a.jsx)(x.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:s,className:(0,i.cn)("space-y-2",t),...l})})});f.displayName="FormItem";let p=r.forwardRef((e,s)=>{let{className:t,...r}=e,{error:l,formItemId:n}=m();return(0,a.jsx)(d.J,{ref:s,className:(0,i.cn)(l&&"text-destructive",t),htmlFor:n,...r})});p.displayName="FormLabel";let h=r.forwardRef((e,s)=>{let{...t}=e,{error:r,formItemId:n,formDescriptionId:i,formMessageId:d}=m();return(0,a.jsx)(l.DX,{ref:s,id:n,"aria-describedby":r?"".concat(i," ").concat(d):"".concat(i),"aria-invalid":!!r,...t})});h.displayName="FormControl";let v=r.forwardRef((e,s)=>{let{className:t,...r}=e,{formDescriptionId:l}=m();return(0,a.jsx)("p",{ref:s,id:l,className:(0,i.cn)("text-[0.8rem] text-muted-foreground",t),...r})});v.displayName="FormDescription";let g=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e,{error:n,formMessageId:d}=m(),o=n?String(null==n?void 0:n.message):r;return o?(0,a.jsx)("p",{ref:s,id:d,className:(0,i.cn)("text-[0.8rem] font-medium text-destructive",t),...l,children:o}):null});g.displayName="FormMessage"},37843:(e,s,t)=>{"use strict";t.d(s,{NV:()=>o,UV:()=>d,pf:()=>u,sF:()=>c});var a=t(95155),r=t(12115),l=t(13191),n=t(36527),i=t(29602);let d=r.forwardRef((e,s)=>{let{className:t,containerClassName:r,...n}=e;return(0,a.jsx)(l.wE,{ref:s,containerClassName:(0,i.cn)("flex items-center gap-2 has-[:disabled]:opacity-50",r),className:(0,i.cn)("disabled:cursor-not-allowed",t),...n})});d.displayName="InputOTP";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center",t),...r})});o.displayName="InputOTPGroup";let c=r.forwardRef((e,s)=>{let{index:t,className:n,...d}=e,{char:o,hasFakeCaret:c,isActive:u}=r.useContext(l.dK).slots[t];return(0,a.jsxs)("div",{ref:s,className:(0,i.cn)("relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",u&&"z-10 ring-1 ring-ring",n),...d,children:[o,c&&(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});c.displayName="InputOTPSlot";let u=r.forwardRef((e,s)=>{let{...t}=e;return(0,a.jsx)("div",{ref:s,role:"separator",...t,children:(0,a.jsx)(n.A,{})})});u.displayName="InputOTPSeparator"},9955:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var a=t(95155),r=t(12115),l=t(29602);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"},15785:(e,s,t)=>{"use strict";t.d(s,{J:()=>o});var a=t(95155),r=t(12115),l=t(46195),n=t(31027),i=t(29602);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.b,{ref:s,className:(0,i.cn)(d(),t),...r})});o.displayName=l.b.displayName},39196:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(99827).v)()(e=>({step:"login",setStep:s=>e({step:s}),email:"",setEmail:s=>e({email:s}),onlineUsers:[],setOnlineUsers:s=>e({onlineUsers:s})}))},20241:(e,s,t)=>{"use strict";t.d(s,{dj:()=>m,oR:()=>u});var a=t(12115);let r=0,l=new Map,n=e=>{if(l.has(e))return;let s=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,s)},i=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],o={toasts:[]};function c(e){o=i(o,e),d.forEach(e=>{e(o)})}function u(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=a.useState(o);return a.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},44244:(e,s,t)=>{"use strict";t.d(s,{g:()=>a});let a=t(82651).A.create({baseURL:"https://telegram-clone-t8pe.onrender.com",headers:{"Content-Type":"application/json"}})},29602:(e,s,t)=>{"use strict";t.d(s,{O:()=>n,S:()=>i,cn:()=>l});var a=t(43463),r=t(69795);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}let n=e=>{switch(e){case"notification.mp3":return"Apple";case"notification2.mp3":return"Sammish";case"sending.mp3":return"Belli";case"sending2.mp3":return"Oranger";default:return""}},i=(e,s)=>e.length>s?e.slice(0,s)+"...":e},33326:(e,s,t)=>{"use strict";t.d(s,{Fk:()=>d,HQ:()=>i,Pn:()=>l,R1:()=>o,b9:()=>n,y4:()=>r});var a=t(43415);let r=a.z.object({email:a.z.string().email({message:"Please enter a valid email address."})}),l=a.z.object({oldEmail:a.z.string().email({message:"Please enter a valid email address."})}).merge(r),n=a.z.object({otp:a.z.string().min(6,{message:"Your one-time password must be 6 characters."})}).merge(r),i=a.z.object({text:a.z.string().min(1,{message:"Please enter a message."}),image:a.z.string().optional()}),d=a.z.object({firstName:a.z.string().min(2),lastName:a.z.string().optional(),bio:a.z.string().optional()}),o=a.z.object({confirmText:a.z.string()}).refine(e=>"DELETE"===e.confirmText,{message:'Please enter "DELETE" to confirm.',path:["confirmText"]})}},e=>{var s=s=>e(e.s=s);e.O(0,[234,711,758,73,209,334,376,441,517,358],()=>s(86047)),_N_E=e.O()}]);